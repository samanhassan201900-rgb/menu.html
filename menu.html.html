<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Checkmate â€” Menu</title>
<style>
  :root{
    --bg:#0b0b0b;
    --card:#0f0f0f;
    --gold:#b99c4b;
    --muted:#bdbdbd;
    --accent:#d4be6f;
    font-family: "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
  }
  html,body{height:100%;margin:0;background:linear-gradient(180deg,#060606 0%, #0b0b0b 100%);color:#fff}
  .container{max-width:1100px;margin:28px auto;padding:24px}
  header{display:flex;align-items:center;justify-content:space-between;gap:12px}
  .brand{display:flex;align-items:center;gap:12px}
  .logo{
    width:64px;height:64px;border-radius:8px;
    background:linear-gradient(135deg,var(--gold), #e0c36b);
    display:flex;align-items:center;justify-content:center;font-weight:800;color:#0b0b0b;
    box-shadow: 0 6px 18px rgba(0,0,0,0.6); font-size:20px;
  }
  h1{margin:0;font-size:22px;letter-spacing:1px}
  .lang-switch {display:flex;gap:8px}
  .lang-btn{background:transparent;border:1px solid rgba(255,255,255,0.06);padding:8px 12px;border-radius:8px;color:var(--muted);cursor:pointer}
  .lang-btn.active{border-color:var(--gold);color:var(--gold);box-shadow:0 6px 20px rgba(185,156,75,0.12)}
  main{margin-top:18px}
  .sections{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:18px}
  .card{background:linear-gradient(180deg,#0f0f0f 0%, #101010 100%);border-radius:12px;padding:14px;border:1px solid rgba(255,255,255,0.04);box-shadow:0 6px 20px rgba(0,0,0,0.6)}
  .card h3{margin:0 0 8px 0;color:var(--gold)}
  .card .meta{color:var(--muted);font-size:13px;margin-bottom:8px}
  .thumbs{display:flex;gap:8px;flex-wrap:wrap}
  .thumbs img{width:72px;height:54px;object-fit:cover;border-radius:6px;cursor:pointer;border:2px solid rgba(255,255,255,0.03)}
  .menu-grid{display:grid;grid-template-columns:1fr;gap:12px;margin-top:16px}
  .item{display:flex;align-items:center;gap:12px;padding:10px;border-radius:10px;background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.00))}
  .item img{width:84px;height:64px;object-fit:cover;border-radius:8px;flex-shrink:0}
  .item .info{flex:1}
  .price{color:var(--accent);font-weight:700}
  footer{margin-top:22px;color:var(--muted);font-size:13px;text-align:center}
  /* gallery page */
  .gallery{
    position:fixed;inset:0;background:rgba(2,2,2,0.92);display:none;flex-direction:column;align-items:center;padding:28px;z-index:9999
  }
  .gallery .top{width:100%;display:flex;justify-content:space-between;align-items:center;color:var(--muted);margin-bottom:12px}
  .gallery .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:12px;width:100%;max-width:1100px;overflow:auto;padding:8px}
  .gallery img{width:100%;height:170px;object-fit:cover;border-radius:8px}
  .close-btn{background:transparent;border:1px solid rgba(255,255,255,0.06);color:var(--muted);padding:8px 12px;border-radius:8px;cursor:pointer}
  /* language directions */
  [dir="rtl"]{direction:rtl}
  @media (max-width:600px){
    .item img{width:72px;height:56px}
  }
</style>
</head>
<body>
<div class="container" id="app">
  <header>
    <div class="brand">
      <div class="logo">CM</div>
      <div>
        <h1 data-i18n="title">Checkmate â€” Menu</h1>
        <div style="color:var(--muted);font-size:13px" data-i18n="tagline">Fine dining Â· Black & Gold Â· Authentic flavors</div>
      </div>
    </div>
    <div class="lang-switch" role="tablist" aria-label="Language switcher">
      <button class="lang-btn active" data-lang="en">ğŸ‡¬ğŸ‡§ English</button>
      <button class="lang-btn" data-lang="ar">ğŸ‡¸ğŸ‡¦ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</button>
      <button class="lang-btn" data-lang="ku">ğŸ‡¹ğŸ‡¯ Ú©ÙˆØ±Ø¯ÛŒ (Ø¨Ø§Ø¯ÛŒÙ†ÛŒ)</button>
    </div>
  </header>

  <main>
    <section style="margin-top:18px">
      <div style="display:flex;gap:12px;flex-wrap:wrap;align-items:center;justify-content:space-between">
        <h2 style="margin:0" data-i18n="menu_heading">Our Menu</h2>
        <div style="color:var(--muted);font-size:13px" data-i18n="choose_lang">Ø§Ø®ØªØ± Ù„ØºØ© Ù„Ø¹Ø±Ø¶ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©</div>
      </div>

      <div class="sections" id="sectionsContainer" style="margin-top:14px">
        <!-- sections injected by JS -->
      </div>
    </section>

    <section style="margin-top:22px">
      <div class="card">
        <h3 data-i18n="popular_heading">Popular Items</h3>
        <div class="menu-grid" id="itemsContainer">
          <!-- items injected by JS -->
        </div>
      </div>
    </section>

    <footer>
      <div data-i18n="footer_note">Â© Checkmate â€” All rights reserved</div>
    </footer>
  </div>
</div>

<!-- gallery modal -->
<div class="gallery" id="gallery">
  <div class="top">
    <div style="display:flex;gap:12px;align-items:center">
      <strong id="galleryTitle" style="color:var(--gold)"></strong>
      <span id="galleryCount" style="color:var(--muted);font-size:13px"></span>
    </div>
    <div>
      <button class="close-btn" id="closeGallery" data-i18n="close">Close</button>
    </div>
  </div>
  <div class="grid" id="galleryGrid"></div>
</div>

<script>
/* ----- Data (menu + translations + images) ----- */
/* Note: Images are sourced from Unsplash (real images). You can replace any URL with your preferred image. */
const menuData = {
  sections: [
    {
      id: "mains",
      key: "main_dishes",
      images: [
        "https://source.unsplash.com/collection/190727/800x600", // mixed mains
        "https://source.unsplash.com/800x600/?steak",
        "https://source.unsplash.com/800x600/?grill"
      ],
      items: [
        { id:"m1", price:"9.50", img:"https://source.unsplash.com/400x300/?chicken-dish" },
        { id:"m2", price:"12.00", img:"https://source.unsplash.com/400x300/?lamb" },
        { id:"m3", price:"11.00", img:"https://source.unsplash.com/400x300/?fish-dish" }
      ]
    },
    {
      id: "drinks",
      key: "drinks",
      images: [
        "https://source.unsplash.com/800x600/?juice",
        "https://source.unsplash.com/800x600/?cocktail",
        "https://source.unsplash.com/800x600/?smoothie"
      ],
      items: [
        { id:"d1", price:"2.50", img:"https://source.unsplash.com/400x300/?orange-juice" },
        { id:"d2", price:"3.00", img:"https://source.unsplash.com/400x300/?lemonade" },
        { id:"d3", price:"3.50", img:"https://source.unsplash.com/400x300/?milkshake" }
      ]
    },
    {
      id: "sweets",
      key: "desserts",
      images: [
        "https://source.unsplash.com/800x600/?dessert",
        "https://source.unsplash.com/800x600/?cake",
        "https://source.unsplash.com/800x600/?baklava"
      ],
      items: [
        { id:"s1", price:"4.50", img:"https://source.unsplash.com/400x300/?cheesecake" },
        { id:"s2", price:"3.00", img:"https://source.unsplash.com/400x300/?tiramisu" },
        { id:"s3", price:"2.50", img:"https://source.unsplash.com/400x300/?baklava" }
      ]
    },
    {
      id: "fastfood",
      key: "fast_food",
      images: [
        "https://source.unsplash.com/800x600/?pizza",
        "https://source.unsplash.com/800x600/?burger",
        "https://source.unsplash.com/800x600/?fries"
      ],
      items: [
        { id:"f1", price:"7.00", img:"https://source.unsplash.com/400x300/?pizza-slice" },
        { id:"f2", price:"5.50", img:"https://source.unsplash.com/400x300/?burger" },
        { id:"f3", price:"2.50", img:"https://source.unsplash.com/400x300/?fries" }
      ]
    }
  ],
  translations: {
    en: {
      title: "Checkmate â€” Menu",
      tagline: "Fine dining Â· Black & Gold Â· Authentic flavors",
      menu_heading: "Our Menu",
      choose_lang: "Choose a language to display menu",
      main_dishes: "Main Dishes",
      drinks: "Juices & Drinks",
      desserts: "Desserts",
      fast_food: "Pizza / Fast Food",
      popular_heading: "Popular Items",
      close: "Close",
      footer_note: "Â© Checkmate â€” All rights reserved",
      // items by id (simple examples)
      items: {
        m1: {name:"Grilled Chicken Deluxe", desc:"Served with herbs & saffron rice"},
        m2: {name:"Slow-Roast Lamb", desc:"Tender lamb with rosemary jus"},
        m3: {name:"Pan-Seared Fish", desc:"Local catch with lemon butter"},
        d1: {name:"Fresh Orange Juice", desc:"Cold-pressed oranges"},
        d2: {name:"Classic Lemonade", desc:"Fresh lemons, mint"},
        d3: {name:"Vanilla Milkshake", desc:"Creamy vanilla milkshake"},
        s1: {name:"Cheesecake", desc:"Rich cream cheese filling"},
        s2: {name:"Tiramisu", desc:"Italian coffee dessert"},
        s3: {name:"Baklava", desc:"Honey & pistachio layers"},
        f1: {name:"Margherita Pizza", desc:"Tomato, mozzarella, basil"},
        f2: {name:"Cheeseburger", desc:"100% beef patty & cheddar"},
        f3: {name:"Crispy Fries", desc:"Seasoned hand-cut fries"}
      }
    },
    ar: {
      title: "Ù‚Ø§Ø¦Ù…Ø© Checkmate",
      tagline: "ØªØ¬Ø±Ø¨Ø© ÙØ§Ø®Ø±Ø© Â· Ø£Ø³ÙˆØ¯ ÙˆØ°Ù‡Ø¨ÙŠ Â· Ù†ÙƒÙ‡Ø§Øª Ø£ØµÙ„ÙŠØ©",
      menu_heading: "Ù‚Ø§Ø¦Ù…ØªÙ†Ø§",
      choose_lang: "Ø§Ø®ØªØ± Ù„ØºØ© Ù„Ø¹Ø±Ø¶ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©",
      main_dishes: "Ø§Ù„Ø£ÙƒÙ„Ø§Øª Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©",
      drinks: "Ø§Ù„Ø¹ØµØ§Ø¦Ø± ÙˆØ§Ù„Ù…Ø´Ø±ÙˆØ¨Ø§Øª",
      desserts: "Ø§Ù„Ø­Ù„ÙˆÙŠØ§Øª",
      fast_food: "Ø§Ù„Ø¨ÙŠØªØ²Ø§ / Ø§Ù„ÙØ§Ø³Øª ÙÙˆØ¯",
      popular_heading: "Ø§Ù„Ø£Ø·Ø¨Ø§Ù‚ Ø§Ù„Ø´Ù‡ÙŠØ±Ø©",
      close: "Ø¥ØºÙ„Ø§Ù‚",
      footer_note: "Â© Checkmate â€” Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©",
      items: {
        m1: {name:"Ø¯Ø¬Ø§Ø¬ Ù…Ø´ÙˆÙŠ Ø¯ÙŠÙ„ÙˆÙƒØ³", desc:"ÙŠÙÙ‚Ø¯Ù… Ù…Ø¹ Ø£Ø¹Ø´Ø§Ø¨ ÙˆØ£Ø±Ø² Ø¨Ø§Ù„Ø²Ø¹ÙØ±Ø§Ù†"},
        m2: {name:"Ù„Ø­Ù… Ø§Ù„Ø¶Ø£Ù† Ø§Ù„Ù…Ø´ÙˆÙŠ Ø¨Ø¨Ø·Ø¡", desc:"Ù„Ø­Ù… Ø·Ø±ÙŠ Ù…Ø¹ ØµÙˆØµ Ø§Ù„Ø±ÙˆØ²Ù…Ø§Ø±ÙŠ"},
        m3: {name:"Ø³Ù…Ùƒ Ù…Ù‚Ù„ÙŠ Ø¨Ø­Ø±Øµ", desc:"Ø³Ù…Ùƒ Ù…Ø­Ù„ÙŠ Ù…Ø¹ Ø²Ø¨Ø¯Ø© Ø§Ù„Ù„ÙŠÙ…ÙˆÙ†"},
        d1: {name:"Ø¹ØµÙŠØ± Ø¨Ø±ØªÙ‚Ø§Ù„ Ø·Ø§Ø²Ø¬", desc:"Ù…Ø³ØªØ®Ø±Ø¬ Ø¨Ø§Ø±Ø¯ Ù…Ù† Ø§Ù„Ø¨Ø±ØªÙ‚Ø§Ù„"},
        d2: {name:"Ù„ÙŠÙ…ÙˆÙ†Ø§Ø¯Ø© ÙƒÙ„Ø§Ø³ÙŠÙƒÙŠØ©", desc:"Ù„ÙŠÙ…ÙˆÙ† Ø·Ø§Ø²Ø¬ ÙˆÙ†Ø¹Ù†Ø§Ø¹"},
        d3: {name:"Ù…ÙŠÙ„ÙƒØ´ÙŠÙƒ ÙØ§Ù†ÙŠÙ„Ø§", desc:"Ù…ÙŠÙ„ÙƒØ´ÙŠÙƒ ÙØ§Ù†ÙŠÙ„Ø§ ÙƒØ±ÙŠÙ…ÙŠ"},
        s1: {name:"ØªØ´ÙŠØ² ÙƒÙŠÙƒ", desc:"Ø­Ø´ÙˆØ© Ø¬Ø¨Ù† ÙƒØ±ÙŠÙ…ÙŠ ØºÙ†ÙŠØ©"},
        s2: {name:"ØªÙŠØ±Ø§Ù…ÙŠØ³Ùˆ", desc:"Ø­Ù„ÙˆÙ‰ Ø¥ÙŠØ·Ø§Ù„ÙŠØ© Ø¨Ø§Ù„Ù‚Ù‡ÙˆØ©"},
        s3: {name:"Ø¨Ù‚Ù„Ø§ÙˆØ©", desc:"Ø·Ø¨Ù‚Ø§Øª Ø¹Ø³Ù„ ÙˆÙØ³ØªÙ‚"},
        f1: {name:"Ø¨ÙŠØªØ²Ø§ Ù…Ø§Ø±ØºØ±ÙŠØªØ§", desc:"Ø·Ù…Ø§Ø·Ù…ØŒ Ù…ÙˆØ²Ø§Ø±ÙŠÙ„Ø§ØŒ Ø±ÙŠØ­Ø§Ù†"},
        f2: {name:"ØªØ´ÙŠØ² Ø¨Ø±Ø¬Ø±", desc:"Ù„Ø­Ù… Ø¨Ù‚Ø±ÙŠ 100% Ù…Ø¹ Ø´ÙŠØ¯Ø±"},
        f3: {name:"Ø¨Ø·Ø§Ø·Ø§ Ù…Ù‚Ù„ÙŠØ© Ù…Ù‚Ø±Ù…Ø´Ø©", desc:"Ø¨Ø·Ø§Ø·Ø§ Ù…Ù‚Ø·Ø¹Ø© ÙˆÙ…ØªØ¨Ù„Ø©"}
      }
    },
    ku: {
      /* Kurdish Badini - I used common Badini expressions; if you want exact/local wording I can refine it per your notes */
      title: "Checkmate â€” Ù„ÛŒØ³ØªÙ‡",
      tagline: "ØªÛ•Ù…Û•Ù†ÛÚ©ÛŒ ÙØ§Ø®Û•Ø± Â· Ú•Û•Ø´ Ùˆ Ø²Û•Ø±Ø¯ Â· Ø®Û†Ø´Ù…ÙˆÙˆÛ•Ú©Ø§Ù†Ù‰ Ø¯Û•Ø±ÙˆÙˆÙ†ÛŒ",
      menu_heading: "Ù„ÛŒØ³ØªÛ•ÛŒ Ø¦ÛŒÙ…Ø§Ù†",
      choose_lang: "Ø²Ù…Ø§Ù†ÛÚ© Ù‡Û•Ù„Ø¨Ú˜ÛØ± Ø¨Û† Ù†Ù…Ø§ÛŒØ´ Ú©Ø±Ù†",
      main_dishes: "Ø®ÙˆØ§Ø±Ø¯Ù†Û• Ø³Û•Ø±Û•Ú©ÛŒÛŒÛ•Ú©Ø§Ù†",
      drinks: "Ø¹ØµÛØ± Ùˆ Ø®Û†Ø±Ø§Ú©Û•ÙˆØ§Ù†",
      desserts: "Ø´ÛŒØ±ÛŒÙ†ÛŒÛ•Ú©Ø§Ù†",
      fast_food: "Ù¾ÛŒØªØ²Ø§ / ÙØ§Ø³Øª ÙÙˆØ¯",
      popular_heading: "Ø®ÙˆØ§Ø±Ø¯Ù†Û• Ù¾Û†Ù¾ÙˆÙ„Û•Ø±Û•Ú©Ø§Ù†",
      close: "Ø¯Ø§Ø®ØªÙ†",
      footer_note: "Â© Checkmate â€” Ú¾Û•Ù…ÙˆÙˆ Ù…Ø§ÙÛŒÛ•Ú©Ø§Ù† Ù¾Ø§Ø´Û•Ú©Û•ÙˆØªÙ†",
      items: {
        m1: {name:"Ù…Ø±ØºÛŒ Ú¯Ø±ÛŒÙ„ Ú©Ø±Ø§Ùˆ (Ø¯ÛŒÙ„Û†Ú©Ø³)", desc:"Ø¨Û• Ù‡Û•ÚµÛ•ØªÛŒ Ù‡Û•Ø±Ø¨ Ùˆ Ø¨Ø±Ù†Ø¬ÛŒ Ø²Û•Ø¹ÙØ±Ø§Ù†"},
        m2: {name:"Ú¯Û†Ø´ØªÛŒ Ù…Ø§Ù†Ú¯ÛŒ Ú•Ø§Ø³ØªÚ©Ø±Ø§Ù†", desc:"Ú¯Û†Ø´ØªÛÚ©ÛŒ Ù†Ø±Ù… Ø¨Û• Ø³Û†Ø³Û Ø±Û†Ø²Ù…Û•Ø±ÛŒ"},
        m3: {name:"Ù…Ø§Ù‡ÛŒ Ù¾Û•Ù†-Ø³ÛŒØ±", desc:"Ù…Ø§Ù‡ÛŒ Ù†Ø§ÙˆØ®Û†ÛŒÛŒ Ø¨Û• Ù…Ø§ÛŒÛ•ÛŒ Ù„ÛÙ…Û†Ù†"},
        d1: {name:"Ø¦Ø§ÙˆÛŒ Ù¾Û†Ø±ØªÛ•Ù‚Ø§Ù„ÛŒ ØªØ§Ø²Û•", desc:"Ù¾Û•Ú•Û•Ú©Ø±Ø§ÙˆÛŒ Ø³Ø§ÚµÛ•Ù…"},
        d2: {name:"Ù„ÛÙ…Û†Ù†Û•ÛŒØ¯ Ú©Ù„Ø§Ø³ÛŒÚ©", desc:"Ù„ÛÙ…ÙˆÙ† Ùˆ Ù†Ø¹Ù†Ø§Ø¹ ØªØ§Ø²Û•"},
        d3: {name:"Ù…ÛŒÙ„Ú©Ø´ÛÚ©ÛŒ Ú¤Ø§Ù†ÛŒÙ„Ø§", desc:"Ù…ÛŒÙ„Ú©Ø´ÛÚ©ÛŒ Ú©Ø±ÛŒÙ…ÛŒ Ú¤Ø§Ù†ÛŒÙ„Ø§"},
        s1: {name:"Ú†ÛŒÛŒØ²Ú©ÛÚ©", desc:"Ø¯Ø§Ø®ÚµÚ©Ø±Ø¯Ù†ÛŒ Ù¾Ù†ÛŒØ±ÛŒ Ù‚ÙˆØ±Ø³"},
        s2: {name:"ØªÛŒØ±Ø§ Ù…ÛŒØ³Ùˆ", desc:"Ø´ÛŒØ±ÛŒÙ†ÛŒÛŒ Ø¦ÛŒØªØ§Ù„ÛŒØ§ Ùˆ Ú©Ø§ÙÛ•"},
        s3: {name:"Ø¨Ø§ÙƒÙ„Û•ÙˆÛ•", desc:"Ù„Û•ÛŒØ±Û•ÛŒ Ú¾Û•Úµ Ùˆ Ù¾Û•Ø³ØªÛ•Ù‚"},
        f1: {name:"Ù¾ÛŒØªØ²Ø§ÛŒ Ù…Ø§Ø±Ú¯Ø±ÛØªØ§", desc:"ØªÛ†Ù…Ø§ØªØŒ Ù…ÙˆØ²Ø§Ø±ÛÙ„Ø§ØŒ Ø¨Ø§Ø²Ù„ÛÚ©"),
        f2: {name:"Ú†Û•Ø²Ø¨ÙˆØ±Ú¯Û•Ø±", desc:"Ù¾Û•ØªÛ•ÛŒ Ú¯ÙˆØ´Øª Ù¡Ù Ù % Ùˆ Ú†ÛŒØ¯Û•Ø±"},
        f3: {name:"ÙØ±Ø§ÛŒØ³ Ú©Ø±Ø§Ø³Ù¾ÛŒ", desc:"ÙØ±Ø§ÛŒØ³ÛŒ Ø¯Û•Ø³ØªÚ©Û•ÙˆØªÛ•Ú©Ø§Ù†"
        }
      }
    }
  }
};

/* ----- Utilities ----- */
const langs = ["en","ar","ku"];
let currentLang = "en";

/* render sections */
function renderSections(){
  const container = document.getElementById('sectionsContainer');
  container.innerHTML = "";
  menuData.sections.forEach(sec=>{
    const t = translate(sec.key);
    const card = document.createElement('div');
    card.className = "card";
    card.innerHTML = `
      <h3>${escapeHtml(t)}</h3>
      <div class="meta">${translate('choose_lang')}</div>
      <div class="thumbs">
        ${sec.images.slice(0,4).map((u,i)=><img data-sec="${sec.id}" data-imgidx="${i}" src="${u}" alt="${escapeHtml(t)} ${i+1}" loading="lazy">).join('')}
      </div>
      <div style="margin-top:10px;display:flex;justify-content:space-between;align-items:center">
        <div style="color:var(--muted);font-size:13px">${sec.items.length} items</div>
        <button class="lang-btn" data-open="${sec.id}" style="padding:6px 10px;color:var(--gold);border-color:transparent;background:rgba(185,156,75,0.08)"> ${langLabel('open')} </button>
      </div>
    `;
    container.appendChild(card);
  });
}

/* render popular items */
function renderItems(){
  const container = document.getElementById('itemsContainer');
  container.innerHTML = "";
  // take first item of each section as popular
  menuData.sections.forEach(sec=>{
    const it = sec.items[0];
    const t = menuData.translations[currentLang].items[it.id];
    const itemEl = document.createElement('div');
    itemEl.className = "item card";
    itemEl.style.alignItems="center";
    itemEl.innerHTML = `
      <img src="${it.img}" alt="${escapeHtml(t ? t.name : '')}" loading="lazy">
      <div class="info">
        <div style="display:flex;justify-content:space-between;align-items:center">
          <div>
            <div style="font-weight:700">${escapeHtml(t ? t.name : '')}</div>
            <div style="color:var(--muted);font-size:13px">${escapeHtml(t ? t.desc : '')}</div>
          </div>
          <div style="text-align:right">
            <div class="price">${it.price} USD</div>
            <div style="font-size:12px;color:var(--muted);margin-top:6px">${translate('from') || ''}</div>
          </div>
        </div>
      </div>
    `;
    container.appendChild(itemEl);
  });
}

/* translation helper */
function translate(key){
  const tset = menuData.translations[currentLang] || menuData.translations.en;
  return (tset[key] !== undefined) ? tset[key] : (menuData.translations.en[key] || key);
}
function langLabel(action){
  // small helper for button text (open)
  const map = { en:{open:"Open"}, ar:{open:"ÙØªØ­"}, ku:{open:"Ú©Ú•ÛÙ‘Ù†"} };
  return (map[currentLang] && map[currentLang][action]) ? map[currentLang][action] : action;
}

/* escape */
function escapeHtml(s){ if(!s) return ""; return s.replaceAll('&','&amp;').replaceAll('<','&lt;').replaceAll('>','&gt;'); }

/* apply translations for static elements */
function applyStaticTranslations(){
  // standard keys for top-level texts
  const keys = ["title","tagline","menu_heading","choose_lang","popular_heading","close","footer_note"];
  keys.forEach(k=>{
    document.querySelectorAll([data-i18n="${k}"]).forEach(el=>{
      el.textContent = menuData.translations[currentLang][k] || menuData.translations.en[k] || k;
    });
  });
  // direction: Arabic and Kurdish (Badini) often use rtl. We'll set RTL only for Arabic.
  if(currentLang === "ar"){
    document.documentElement.setAttribute('dir','rtl');
  } else {
    document.documentElement.setAttribute('dir','ltr');
  }
}

/* build menu item names (from translations) */
function buildItemDisplayName(id){
  const t = (menuData.translations[currentLang].items && menuData.translations[currentLang].items[id]) || 
            (menuData.translations.en.items && menuData.translations.en.items[id]) || {name:id,desc:""};
  return t;
}

/* populate everything */
function refreshUI(){
  // language switcher active states
  document.querySelectorAll('.lang-btn[data-lang]').forEach(b=>{
    b.classList.toggle('active', b.getAttribute('data-lang') === currentLang);
  });
  applyStaticTranslations();
  renderSections();
  renderItems();
  // update each item card's text (names)
  // also attach event listeners
  attachHandlers();
}

/* gallery open/close */
function openGallery(sectionId){
  const sec = menuData.sections.find(s=>s.id===sectionId);
  if(!sec) return;
  const g = document.getElementById('gallery');
  const title = document.getElementById('galleryTitle');
  const count = document.getElementById('galleryCount');
  const grid = document.getElementById('galleryGrid');
  title.textContent = menuData.translations[currentLang][sec.key] || menuData.translations.en[sec.key];
  grid.innerHTML = "";
  sec.images.forEach((u,idx)=>{
    const img = document.createElement('img');
    img.src = u;
    img.alt = ${title.textContent} ${idx+1};
    grid.appendChild(img);
  });
  count.textContent = ${sec.images.length} photos;
  g.style.display = "flex";
}

/* attach click handlers for thumbnails and open buttons */
function attachHandlers(){
  // open section buttons
  document.querySelectorAll('[data-open]').forEach(btn=>{
    btn.onclick = ()=> openGallery(btn.getAttribute('data-open'));
  });
  // thumbs clickable -> open gallery for that section
  document.querySelectorAll('.thumbs img').forEach(img=>{
    img.onclick = (e)=>{
      const s = e.target.getAttribute('data-sec');
      openGallery(s);
    };
  });
  // language buttons on top
  document.querySelectorAll('.lang-switch .lang-btn').forEach(b=>{
    if(b.hasAttribute('data-lang')){
      b.onclick = ()=>{
        const pick = b.getAttribute('data-lang');
        currentLang = pick;
        refreshUI();
      };
    }
  });
  // close gallery
  document.getElementById('closeGallery').onclick = ()=>{ document.getElementById('gallery').style.display='none'; };
  // close on background click
  document.getElementById('gallery').onclick = (e)=>{
    if(e.target === document.getElementById('gallery')) document.getElementById('gallery').style.display='none';
  };
}

/* small localization keys not present above */
menuData.translations.en.from = "From";
menuData.translations.ar.from = "Ù…Ù†";
menuData.translations.ku.from = "Ù„Û•";

/* initial render */
refreshUI();
</script>
</body>
</html>